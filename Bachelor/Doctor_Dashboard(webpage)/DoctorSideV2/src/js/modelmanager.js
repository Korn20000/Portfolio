function modelmanager(model, adapter) {    "use scrict";	    function loadPatients() {        try {            adapter.fetchJSONResponseData(adapter.ajaxGetPatients()).then(function(data) {                    console.log('loadPatients data:', data);                    model.setPatients(JSON.parse(data));                },                function(error) {                    console.log('Error in loadPatients:', error);                    model.setPatients("Error Loading Patients !");                });        } catch (error) {            console.log('Error in loadPatients:', error);        }    }    function getPatientsArray() {        return model.getPatients();    }    function arePatientsUpdated() {        return model.getPatientsUpdated();    }    function patientsUpdateFinish() {        return model.setPatientsUpdated(false);    }    function loadPatientsHistory(cpr) {        try {            adapter.fetchJSONResponseData(adapter.ajaxGetHistory(cpr)).then(function(historyData) {                    console.log('loadHistory data:', historyData);                    model.setPatientHistory(JSON.parse(historyData));                },                function(error) {                    console.log('Error in loadPatientsHistory:', error);                    model.setPatientHistory("Error Loading Patient's History !");                });        } catch (error) {            console.log('Error in loadPatientsHistory:', error);        }    }    function getPatientHistoryArray() {        return model.getPatientHistory();    }    function isHistoryUpdated() {        return model.getHistoryUpdated();    }    function historyUpdateFinish() {        model.setHistoryUpdated(false);    }    return {        loadPatients,        getPatientsArray,        arePatientsUpdated,        patientsUpdateFinish,        getPatientHistoryArray,        isHistoryUpdated,        historyUpdateFinish,		loadPatientsHistory    };}